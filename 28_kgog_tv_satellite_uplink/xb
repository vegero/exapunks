GRAB 301
LINK 800
REPL KEY
SEEK 1
MARK DATALOOP
TEST EOF
TJMP END
COPY F M
JUMP DATALOOP

MARK KEY
GRAB 199
MARK KEYLOOP
TEST EOF
FJMP RECVDATA
SEEK -9999
MARK RECVDATA

; CHECK OVERFLOW
SUBI 9999 M X
TEST F > X
SEEK -1
TJMP OVERFLOWED
SUBI 9999 X X
MODE
ADDI X F M
MODE
JUMP KEYLOOP

MARK OVERFLOWED
; SLOW PATH
SUBI F X X
MODE
SUBI X 1 M
MODE
JUMP KEYLOOP

MARK END
WIPE
COPY 4 T
MARK KILLLOOP
SUBI T 1 T
TJMP KILLLOOP
KILL
KILL
GRAB 402
WIPE
